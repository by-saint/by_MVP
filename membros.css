:root {
  --color-ia-specialist: #007BFF;
  --color-video-lessons: #8A2BE2;
  --color-journey: #DC143C;
  --journey-red-1: #ff2646;
  --journey-red-2: #be123c;
  --journey-dark: #2a0a12;
  --bg: #121212;
  --card: #1E1E1E;
  --muted: #bbb;
}
html { scroll-behavior: smooth; }
body { font-family: 'Poppins', sans-serif; background-color: var(--bg); color: #E0E0E0; margin: 0; padding: 40px 20px; }
.container { max-width: 1600px; margin: 0 auto; padding: 0 20px; }
h1,h2,h3{ color:#f0f0f0; text-align:center; margin-top:30px; margin-bottom:15px; }

/* MENU / SIDEBAR */
.menu-toggle { position: fixed; top: 25px; left: 25px; z-index: 1001; background: #333; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:5px; padding:0; }
.menu-toggle .bar { width:24px; height:3px; background-color:#fff; border-radius:2px; transition: all 0.3s; }
.menu-toggle.open .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
.menu-toggle.open .bar:nth-child(2) { opacity: 0; }
.menu-toggle.open .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

.sidebar { position: fixed; top: 0; left: -300px; width: 280px; height: 100%; background-color: var(--card); transition: left 0.28s ease; z-index:1000; border-right:1px solid #333; display:flex; flex-direction:column; justify-content:space-between; }
.sidebar.open { left: 0; }
.sidebar nav { padding-top: 100px; }
.sidebar nav ul{ list-style:none; padding:0; margin:0; }
/* Nav link style updated to show colored rectangle at left when active */
.sidebar nav a{ display:block; padding:15px 30px; padding-left:44px; text-decoration:none; font-size:1.05em; font-weight:700; border-left:5px solid transparent; transition: background-color 0.2s, border-left 0.2s; color:var(--muted); position:relative; }
.sidebar nav a::before { content: ''; position:absolute; left:12px; top:50%; transform:translateY(-50%); width:8px; height:60%; border-radius:4px; opacity:0; transition: opacity 0.18s, transform 0.18s; }
.sidebar nav a:hover{ background-color:#2c2c2c; color:#fff; }
.sidebar nav a.active{ background-color:rgba(255,255,255,0.02); color:#fff; }
/* colored rectangle per tab */
.link-ia.active::before { background: linear-gradient(180deg,var(--color-ia-specialist), #0056b3); opacity:1; }
.link-aulas.active::before { background: linear-gradient(180deg,#c048f2,#6b21a8); opacity:1; }
.link-percurso.active::before { background: linear-gradient(180deg,var(--journey-red-1),var(--journey-red-2)); opacity:1; }

.sidebar-footer { padding:20px 30px; text-align:center; }
.sidebar-config-btn { width:100%; background:transparent; border:1px solid #444; color:#aaa; padding:10px; border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:8px; font-weight:600; }
.sidebar-config-btn:hover{ background:#333; color:#fff; }
.sidebar-action-btn{ width:100%; padding:10px; border-radius:8px; cursor:pointer; font-weight:600; transition: all 0.2s; margin-top:10px; }
.sidebar-reset-btn{ background:transparent; border:1px solid var(--color-ia-specialist); color:var(--color-ia-specialist); }
.sidebar-reset-btn:hover{ background:var(--color-ia-specialist); color:#fff; }
.sidebar-logout-btn{ background:#be123c; border:1px solid #be123c; color:#fff; }
.sidebar-logout-btn:hover{ background:#ff4757; border-color:#ff4757; }
.hidden{ display:none; }

.overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:999; opacity:0; visibility:hidden; transition:opacity 0.28s, visibility 0.28s; }
.overlay.show{ opacity:1; visibility:visible; }

.header { display:flex; justify-content:flex-end; align-items:center; margin-bottom:20px; }
#welcome-msg { color:#bbb; margin-right:20px; }

.tab-content{ display:none; }
.tab-content.active{ display:block; }
.form-wrapper, .results-wrapper { width:100%; max-width:900px; margin:0 auto; }

.form-container, .results-container, .percurso-container { background-color: var(--card); padding:40px; border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border:1px solid #333; color:#E0E0E0; }
.form-group{ margin-bottom:20px; }
label{ display:block; margin-bottom:8px; font-weight:600; color:#BBBBBB; }
input, select, textarea { width:100%; padding:12px; background-color:#2C2C2C; border:1px solid #444; border-radius:8px; color:#E0E0E0; font-size:16px; box-sizing:border-box; }
textarea{ resize:vertical; min-height:100px; }

.goal-section{ background: linear-gradient(145deg,#2a2a2a,#1a1a1a); border:1px solid #444; padding:30px; margin-bottom:24px; border-radius:10px; text-align:center; }
.goal-title{ font-size:28px; font-weight:700; background: linear-gradient(90deg,#007BFF,#00C6FF); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
button[type="submit"]{ width:100%; padding:15px; background:linear-gradient(90deg,#007BFF,#0056b3); border:none; border-radius:8px; color:#fff; font-size:18px; font-weight:600; cursor:pointer; }

.progress-section{ margin-top:24px; padding:20px; background-color:#2C2C2C; border-radius:10px; }
.progress-bar-container{ width:100%; background-color:#444; border-radius:10px; overflow:hidden; }
.progress-bar{ width:0%; background-color:#007BFF; height:20px; transition: width 0.5s ease-in-out; }
.progress-labels{ display:flex; justify-content:space-between; font-size:12px; color:#aaa; margin-top:5px; }
.countdown-container{text-align:center; margin-top:20px; }
.countdown-days{ font-size:4rem; font-weight:700; color:#fff; line-height:1; }
.countdown-label{ font-size:1rem; color:#aaa; }

.playlist-section{ text-align:center; margin:24px 0; }
.playlist-btn{ background:#007BFF; color:white; border:none; padding:12px 24px; font-size:1.1em; cursor:pointer; border-radius:8px; }

/* CORREÇÃO VISUAL: Garante que os formulários fiquem lado a lado em telas maiores */
.percurso-forms{ display:grid; grid-template-columns:1fr 1fr; gap:24px; margin-top:20px; }
.percurso-card{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.25)); border:1px solid rgba(190,18,60,0.06); padding:20px; border-radius:12px; }
.generated-diet-card{ border:2px solid rgba(190,18,60,0.14); box-shadow:0 8px 24px rgba(190,18,60,0.06); padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.16)); color:#ddd; }

/* Plan UI */
.plan-tabs{ display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap; }
.plan-tab{ padding:8px 12px; border-radius:999px; background:#2b2b2b; color:#fff; font-weight:700; cursor:pointer; border:1px solid rgba(255,255,255,0.03); }
.plan-tab.active{ background: linear-gradient(90deg,var(--journey-red-1),var(--journey-red-2)); color:white; }
.plan-days{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
.plan-day{ background: linear-gradient(180deg,#141414,#0f0f0f); padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); }
.meal-row{ margin-bottom:10px; padding:8px; border-radius:8px; background:#0d0d0d; display:flex; justify-content:space-between; align-items:center; gap:10px; border:1px solid rgba(255,255,255,0.02); }
.meal-left{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; } /* Adicionado flex-wrap */
.meal-name{ font-weight:700; color:#fff; }
.meal-kcal{ font-weight:700; color:#f3f3f3; background: rgba(255,255,255,0.03); padding:6px 8px; border-radius:8px; }

/* dify */
.iframe-container{ border-radius:12px; overflow:hidden; position:relative; height:70vh; min-height:340px; max-height:720px; background:#000; }
.dify-top-strip{ position:absolute; top:0; left:0; width:100%; height:50px; background:#000000; z-index:2; pointer-events:none; display:flex; align-items:center; justify-content:space-between; padding:0 20px; box-sizing:border-box; }
.dify-top-badge{ font-weight:700; font-size:1.1em; color:#fff; background: linear-gradient(90deg,#007BFF,#0056b3); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.mvp-label{ font-size:10px; font-weight:700; color:#555; text-transform:uppercase; letter-spacing:0.5px; }

/* day selector */
.day-selector-container { background-color: #2C2C2C; border:1px solid #444; border-radius:8px; }
.day-selector-summary { padding:12px; font-weight:600; color:#BBBBBB; cursor:pointer; position:relative; }
.day-selector-summary::after { content:'▼'; font-size:0.8em; position:absolute; right:15px; top:14px; transition:transform 0.2s; }
.day-selector-container[open] .day-selector-summary::after { transform: rotate(180deg); }
.day-selector-grid { display:flex; flex-wrap:wrap; gap:10px; padding:0 12px 12px 12px; justify-content:center; }
.day-circle-input{ display:none; }
.day-circle-label{ display:flex; align-items:center; justify-content:center; width:40px; height:40px; border-radius:50%; border:2px solid #555; background:#333; color:#E0E0E0; font-size:14px; font-weight:700; cursor:pointer; user-select:none; }
.day-circle-input:checked + .day-circle-label{ background:var(--color-ia-specialist); border-color:var(--color-ia-specialist); color:#fff; box-shadow:0 0 10px rgba(0,123,255,0.5); }

@media(max-width:900px){
  .percurso-forms{ grid-template-columns:1fr; } /* Em telas menores, volta a ser 1 coluna */
  .plan-days{ grid-template-columns:1fr; }
  body{ padding:20px 12px; }
  .day-circle-label{ width:36px; height:36px; font-size:13px; }
  .iframe-container{ height:48vh; min-height:220px; }
}

/* modal for follow-up questions */
.followup-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:2000; }
.followup-modal { width: 560px; max-width:94%; background:var(--card); border-radius:12px; padding:20px; box-shadow:0 12px 40px rgba(0,0,0,0.6); color:#fff; }
.followup-modal h4 { margin-top:0; }
.followup-field { margin-bottom:12px; }
.followup-actions { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
.followup-actions button { padding:8px 12px; border-radius:8px; border:none; cursor:pointer; }
.followup-input, .followup-select { width:100%; padding:10px; border-radius:8px; background:#222; border:1px solid #333; color:#fff; }


/* === ESTILOS PARA TROCA DE ALIMENTOS (Melhoria 2) === */
.swap-modal {
  width: 640px; /* Um pouco mais largo que o followup-modal */
  max-width: 95%;
  background: var(--card);
  border-radius: 12px;
  padding: 20px 25px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  color: #fff;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.swap-modal h3 {
  margin-top: 0;
  color: #fff;
  text-align: left; /* Alinha o título à esquerda */
}

.swap-section {
  margin-bottom: 15px;
}

.swap-label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #BBBBBB;
}

/* Estilo para os seletores <select> */
.swap-select {
  width: 100%;
  padding: 12px;
  background-color: #2C2C2C;
  border: 1px solid #444;
  border-radius: 8px;
  color: #E0E0E0;
  font-size: 16px;
  box-sizing: border-box;
}

/* Grid de substituição de alimentos */
.swap-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
  max-height: 280px; /* Altura máxima antes de rolar */
  overflow-y: auto;
  padding: 10px;
  background: #111;
  border-radius: 8px;
  border: 1px solid #333;
}

/* Cada item de comida clicável */
.swap-item {
  background: #2C2C2C;
  border: 2px solid #444;
  color: #E0E0E0;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
  font-size: 13px;
  font-weight: 600;
  transition: all 0.2s;
  line-height: 1.3;
}

.swap-item:hover {
  background: #3a3a3a;
  border-color: #555;
}

/* Estilo para o item selecionado */
.swap-item.selected {
  background: var(--color-ia-specialist);
  border-color: var(--color-ia-specialist);
  color: #fff;
  box-shadow: 0 0 10px rgba(0,123,255,0.5);
}

/* Estado de carregamento ou mensagem */
.swap-loading {
  padding: 40px;
  text-align: center;
  color: var(--muted);
  min-height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  grid-column: 1 / -1; /* Ocupa a linha inteira */
}

/* Botões de ação no modal */
.swap-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid #333;
}

.swap-actions button {
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  font-size: 15px;
}

.swap-btn-cancel {
  background: #444;
  color: #fff;
}
.swap-btn-confirm {
  background: var(--journey-red-1); /* CORREÇÃO: Botão de confirmação vermelho */
  color: #fff;
}
.swap-btn-confirm:disabled {
  background: #333;
  color: #777;
  cursor: not-allowed;
}

/* Estilos para os Radio Buttons (Todas / Refeição Específica) */
.swap-radio-group {
  display: grid; /* Alterado para grid */
  grid-template-columns: 1fr 1fr; /* Duas colunas iguais */
  gap: 10px;
}
.swap-radio-group label {
  flex: 1;
  padding: 10px;
  background: #2C2C2C;
  border: 2px solid #444;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  font-weight: 600;
  margin-bottom: 0; /* Reseta a margem padrão do label */
}
.swap-radio-group input {
  display: none; /* Esconde o radio button real */
}
/* Estilo quando o radio está selecionado */
.swap-radio-group input:checked + label {
  background: #333;
  border-color: var(--color-ia-specialist);
  color: #fff;
}
